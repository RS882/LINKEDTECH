function testWebP(t){var e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(t){1==t?document.querySelector("body").classList.add("_webp"):document.querySelector("body").classList.add("_no-webp")}));class ItemOffer{constructor(t,{id:e,src:s,size:o,alt:i,title:a,name:r,descr:c,sale:n,price:l,salePrice:d,url:u,stars:_,classes:p}){this.id=e,this.item=t,this.src=s,this.url=u,this.name=r,this.size={width:o.width?o.width:"263",height:o.height?o.height:"248"},this.alt=i,this.title=a,this.descr=c,this.sale=n,this.price=l,this.salePrice=d,this.classes=p?[...p]:[],this.stars=_||5}render(){const t=document.createElement("div"),e=e=>{const s=new Set(e);this.classes.length&&s.add(...this.classes),Array.from(s).forEach(e=>t.classList.add(e))};if(t.setAttribute("data-pid",""+this.id),this.item.includes("promo"))e(["promo__cart","cart-promo"]),t.innerHTML=`\n\t\t\t<div class="cart-promo__box">\n\t\t\t\t<button type="button" class="cart-promo__cart cart-button cart _icon-cart"></button>\n\t\t\t\t<div class="cart-promo__img img-promo">\n\t\t\t\t\t<div class="img-promo__wrapper">\n\t\t\t\t\t\t<button type="button" class="img-promo__scale scale _icon-magnifier"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div d class="img-promo__img-box _ibg">\n\t\t\t\t\t\t<picture>\n\t\t\t\t\t\t\t<source srcset=${this.src} type="image/webp">\n\t\t\t\t\t\t\t<img data-data="" src=${this.src} width=${this.size.width} height=${this.size.height} alt=${this.alt}>\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="cart-promo__descr descr">\n\t\t\t\t<h3 class="descr__title">${this.title}</h3>\n\t\t\t\t<div class="descr__text">${this.descr}</div>\n\t\t\t\t<div class="descr__prices prices">\n\t\t\t\t\t<div class="prices__price">$ ${this.price} </div>\n\t\t\t\t\t<div class="prices__price prices__price--old"> / <span>$ ${this.salePrice}</span> </div>\n\t\t\t\t</div>\n\t\t\t\t<div data-star = "${this.stars}" class="descr__stars stars">\n\t\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`,document.querySelector(".promo").append(t);else{if(!this.item.includes("show"))return;e(["show__box"]),t.innerHTML=`\n\t\t\t\t<div class="show__text">\n\t\t\t\t\t\t<div class="show__sale">Get up to ${this.sale}% off Today Only!</div>\n\t\t\t\t\t\t<h3 class="show__title">${this.title}</h3>\n\t\t\t\t\t\t<a href=${this.url} class="show__btn">Show Now</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div  data-pid="${this.id}" class="show__img _ibg">\n\t\t\t\t\t<picture>\n\t\t\t\t\t\t<source srcset=${this.src} type="image/webp">\n\t\t\t\t\t\t<img src=${this.src} width=${this.size.width} height=${this.size.height} alt=${this.alt}>\n\t\t\t\t\t</picture>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`,document.querySelector(".show").append(t)}}}class ItemProduct{constructor({id:t,url:e,favorit:s,labels:o,properties:i,src:a,title:r,price:c,salePrice:n,stars:l}){this.id=t,this.url=e,this.favorit=s,this.labels=o,this.properties=i.reduce((t,e)=>t+e,""),this.src=a,this.title=r,this.price=c,this.salePrice=n,this.stars=l||5}render(){const t=document.querySelector(".new-product__items"),e=document.createElement("article"),s=(t,e)=>""==t?e:"";e.setAttribute("data-pid",this.id),e.setAttribute("data-tab",this.properties),e.classList.add("new-product__cart-item","item-card");let o=this.labels?this.labels.reduce((t,e)=>t+`<div class="item-card__label item-card__label--${e.type}">\n\t\t\t\t ${e.value}\n\t\t\t\t </div> `,""):"",i=this.src.reduce((t,e)=>{let o=e.size.width?"width="+e.size.width:"",i=e.size.height?"height="+e.size.height:"";return t+`<img data-data  ${""!=e.color?"data-c="+e.color:""}  ${s(t,'class="_active"')} src=${e.img} ${o} ${i}  alt=${e.alt}>`},""),a=t=>`<div class="${t} prices">\n\t\t\t\t<div class="prices__price">$ ${this.price} </div>`+(this.salePrice?`<div class="prices__price prices__price--old"> / <span>$ ${this.salePrice}</span> </div>`:"")+"</div>",r=t=>`\n\t\t\t\t<div data-star=${this.stars} class="${t} stars">\n\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t<span class="_icon-star"></span>\n\t\t\t\t<span class="_icon-star"></span>\n\t\t\t</div>\n\t\t\t\t`,c=this.favorit?"data-f":"",n=this.src.reduce((t,e)=>""!=e.color?t+`<a href="#" data-color=${e.color}  class="item-card__change-color ${s(t," _active")}"></a>`:t,"");e.innerHTML=`\n\t\t\t\t\t<div class="item-card__labels">\n\t\t\t\t\t\t${o}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="item-card__img ">\n\t\t\t\t\t\t<div class="item-card__img-box _ibg">\n\t\t\t\t\t\t\t${i}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="item-card__body">\n\t\t\t\t\t\t<div class="item-card__content">\n\t\t\t\t\t\t\t<h5 class="item-card__name">${this.title}</h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${a("item-card__prices")}\n\t\t\t\t\t\t${r("item-card__stars")}\n\t\t\t\t\t\t<div class="item-card__actions actions-product">\n\t\t\t\t\t\t\t<div class="actions-product__body">\n\t\t\t\t\t\t\t\t<div class="actions-product__links">\n\t\t\t\t\t\t\t\t\t<button type="button" class="actions-product__link actions-product__link--cart cart _icon-cart"></button>\n\t\t\t\t\t\t\t\t\t<a href="#" class="actions-product__link  actions-product__link--scale scale _icon-magnifier"></a>\n\t\t\t\t\t\t\t\t\t<a href="#" ${c} class="actions-product__link actions-product__link--favorit _icon-heart"></a>\n\t\t\t\t\t\t\t\t\t<a href=${this.url} class="actions-product__link actions-product__link--change _icon-change"></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t${a("actions-product__prices")}\n\t\t\t\t\t\t\t\t${r("actions-product__stars")}\n\t\t\t\t\t\t\t\t<div class="item-card__change-colors">\n\t\t\t\t\t\t\t\t\t${n}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t`,t.append(e)}}const userAction={};function stars(){document.querySelectorAll("[data-star]").forEach(t=>{colorStars(t.dataset.star,t.querySelectorAll("span"))})}function colorStars(t,e){for(let s=0;s<t;s++)e[s].style.color="#c72535"}function addColorsBtn(){document.querySelectorAll("[data-color]").forEach(t=>t.style.background=t.dataset.color)}userAction.items={};const getJson=async t=>{const e=await fetch(t);if(!e.ok)throw alert(new Error(`Could not fetch ${t}, status ${e.status}`));return await e.json()},getProducts=t=>{t.classList.contains("_hold")||(t.classList.add("_hold"),getJson("json/products.json").then(e=>{e.products.forEach(t=>{new ItemProduct(t).render(),addColorsBtn(),addFavoritColor(),addItemStatus()});addItemHide(document.querySelector(".new-product__link._active")),t.remove()}).catch(()=>alert("Error!")).finally(()=>{stars(),t.classList.remove("_hold")}))};function _removeClass(t,e){t.forEach(t=>{t.classList.remove(e)})}function _is_hidden(t){return null===t.offsetParent}function scrollHeader(){const t=document.querySelector(".header");new IntersectionObserver((e,s)=>{e[0].isIntersecting?t.classList.remove("_scroll"):t.classList.add("_scroll")}).observe(t)}if(getJson("json/db.json").then(t=>{for(const e in t)t[e].forEach(t=>new ItemOffer(e,t).render())}).catch(()=>alert("Error!")).finally(()=>stars()),location.hash){const t=location.hash.replace("#","");document.querySelector(".popup_"+t)?popup_open(t):document.querySelector("div."+t)&&_goto(document.querySelector("."+t),500,"")}function email_test(t){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(t.value)}window.addEventListener("load",(function(){document.querySelector(".wrapper")&&setTimeout((function(){document.querySelector(".wrapper").classList.add("_loaded")}),0)}));let unlock=!0;var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE "),isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function isIE(){return(ua=navigator.userAgent).indexOf("MSIE ")>-1||ua.indexOf("Trident/")>-1}isIE()&&document.querySelector("html").classList.add("ie"),isMobile.any()&&document.querySelector("html").classList.add("_touch");let _slideUp=(t,e=500)=>{t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=t.offsetHeight+"px",t.offsetHeight,t.style.overflow="hidden",t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,window.setTimeout(()=>{t.style.display="none",t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.classList.remove("_slide")},e)},_slideDown=(t,e=500)=>{t.style.removeProperty("display");let s=window.getComputedStyle(t).display;"none"===s&&(s="block"),t.style.display=s;let o=t.offsetHeight;t.style.overflow="hidden",t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,t.offsetHeight,t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=o+"px",t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),window.setTimeout(()=>{t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.classList.remove("_slide")},e)},_slideToggle=(t,e=500)=>{if(!t.classList.contains("_slide"))return t.classList.add("_slide"),"none"===window.getComputedStyle(t).display?_slideDown(t,e):_slideUp(t,e)};const spollersArray=document.querySelectorAll("[data-spollers]");if(spollersArray.length>0){const t=Array.from(spollersArray).filter((function(t,e,s){return!t.dataset.spollers.split(",")[0]}));t.length>0&&initSpollers(t);const e=Array.from(spollersArray).filter((function(t,e,s){return t.dataset.spollers.split(",")[0]}));if(e.length>0){const t=[];e.forEach(e=>{const s={},o=e.dataset.spollers.split(",");s.value=o[0],s.type=o[1]?o[1].trim():"max",s.item=e,t.push(s)});let s=t.map((function(t){return"("+t.type+"-width: "+t.value+"px),"+t.value+","+t.type}));s=s.filter((function(t,e,s){return s.indexOf(t)===e})),s.forEach(e=>{const s=e.split(","),o=s[1],i=s[2],a=window.matchMedia(s[0]),r=t.filter((function(t){if(t.value===o&&t.type===i)return!0}));a.addListener((function(){initSpollers(r,a)})),initSpollers(r,a)})}function initSpollers(t,e=!1){t.forEach(t=>{t=e?t.item:t,e.matches||!e?(t.classList.add("_init"),initSpollerBody(t),t.addEventListener("click",setSpollerAction)):(t.classList.remove("_init"),initSpollerBody(t,!1),t.removeEventListener("click",setSpollerAction))})}function initSpollerBody(t,e=!0){const s=t.querySelectorAll("[data-spoller]");s.length>0&&s.forEach(t=>{e?(t.removeAttribute("tabindex"),t.classList.contains("_active")||(t.nextElementSibling.hidden=!0)):(t.setAttribute("tabindex","-1"),t.nextElementSibling.hidden=!1)})}function setSpollerAction(t){const e=t.target;if(e.hasAttribute("data-spoller")||e.closest("[data-spoller]")){const s=e.hasAttribute("data-spoller")?e:e.closest("[data-spoller]"),o=s.closest("[data-spollers]"),i=!!o.hasAttribute("data-one-spoller");o.querySelectorAll("._slide").length||(i&&!s.classList.contains("_active")&&hideSpollersBody(o),s.classList.toggle("_active"),_slideToggle(s.nextElementSibling,500)),t.preventDefault()}}function hideSpollersBody(t){const e=t.querySelector("[data-spoller]._active");e&&(e.classList.remove("_active"),_slideUp(e.nextElementSibling,500))}}let iconMenu=document.querySelector(".icon-menu");if(null!=iconMenu){let t=500,e=document.querySelector(".menu__body");iconMenu.addEventListener("click",(function(s){unlock&&(body_lock(t),iconMenu.classList.toggle("_active"),e.classList.toggle("_active"))}))}function menu_close(){let t=document.querySelector(".icon-menu"),e=document.querySelector(".menu__body");t.classList.remove("_active"),e.classList.remove("_active")}function body_lock(t){document.querySelector("body").classList.contains("_lock")?body_lock_remove(t):body_lock_add(t)}function body_lock_remove(t){let e=document.querySelector("body");if(unlock){let s=document.querySelectorAll("._lp");setTimeout(()=>{for(let t=0;t<s.length;t++){s[t].style.paddingRight="0px"}e.style.paddingRight="0px",e.classList.remove("_lock")},t),unlock=!1,setTimeout((function(){unlock=!0}),t)}}function body_lock_add(t){let e=document.querySelector("body");if(unlock){let s=document.querySelectorAll("._lp");for(let t=0;t<s.length;t++){s[t].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}e.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",e.classList.add("_lock"),unlock=!1,setTimeout((function(){unlock=!0}),t)}}let popup_link=document.querySelectorAll("._popup-link"),popups=document.querySelectorAll(".popup");for(let t=0;t<popup_link.length;t++){const e=popup_link[t];e.addEventListener("click",(function(t){if(unlock){popup_open(e.getAttribute("href").replace("#",""),e.getAttribute("data-video"))}t.preventDefault()}))}for(let t=0;t<popups.length;t++){popups[t].addEventListener("click",(function(t){t.target.closest(".popup__body")||popup_close(t.target.closest(".popup"))}))}function popup_open(t,e=""){document.querySelectorAll(".popup._active").length>0&&popup_close("",!1);let s=document.querySelector(".popup_"+t);if(s&&unlock){if(""!=e&&null!=e){document.querySelector(".popup_video").querySelector(".popup__video").innerHTML='<iframe src="https://www.youtube.com/embed/'+e+'?autoplay=1"  allow="autoplay; encrypted-media" allowfullscreen></iframe>'}document.querySelector(".menu__body._active")||body_lock_add(500),s.classList.add("_active"),history.pushState("","","#"+t)}}function popup_close(t,e=!0){if(unlock){if(t){let e=t.querySelector(".popup__video");e&&(e.innerHTML=""),t.classList.remove("_active")}else for(let t=0;t<popups.length;t++){const e=popups[t];let s=e.querySelector(".popup__video");s&&(s.innerHTML=""),e.classList.remove("_active")}!document.querySelector(".menu__body._active")&&e&&body_lock_remove(500),history.pushState("","",window.location.href.split("#")[0])}}let popup_close_icon=document.querySelectorAll(".popup__close,._popup-close");if(popup_close_icon)for(let t=0;t<popup_close_icon.length;t++){const e=popup_close_icon[t];e.addEventListener("click",(function(){popup_close(e.closest(".popup"))}))}function modalShow(t){const e=document.querySelector(".modal-img"),s=document.querySelector("body");e.firstElementChild.append(t),e.classList.add("_show","_fade"),s.classList.toggle("_lock"),e.addEventListener("click",o=>{const i=o.target;!i||i.hasAttribute("data-data")||i.classList.contains("modal-img__cart")||(e.classList.remove("_show","_fade"),s.classList.remove("_lock"),t.remove(),modalTarget="")})}function documentActions(t){const e=t.target;if(window.innerWidth>768&&isMobile.any()&&(e&&e.classList.contains("menu__arrow")&&e.closest(".menu__item").classList.toggle("_hover"),e&&!e.closest(".menu__item")&&document.querySelectorAll(".menu__item._hover").length>0&&_removeClass(document.querySelectorAll(".menu__item._hover"),"_hover")),e&&e.classList.contains("search-form__icon")?document.querySelector(".search-form").classList.toggle("_active"):e&&!e.closest(".search-form")&&document.querySelector(".search-form").classList.remove("_active"),e&&(e.classList.contains("language__name")||e.classList.contains("language__arrow"))?e.closest(".language").classList.toggle("_active"):e&&!e.classList.contains("language__name")&&!e.classList.contains("language__arrow")&&document.querySelectorAll(".language._active").length>0&&_removeClass(document.querySelectorAll(".language._active"),"_active"),e&&e.classList.contains("language__sub-link")&&document.querySelectorAll(".language__sub-link").forEach(t=>{e==t&&(document.querySelector(".language__name").textContent=t.textContent)}),e&&e.classList.contains("scale")){t.preventDefault();const s=e.closest("[data-pid]").dataset.pid;let o=document.querySelector(`.item-card[data-pid="${s}"]`);if(o||(o=document.querySelector(`.item-card-new[data-pid="${s}"]`)),o){let t=o.querySelector(".item-card__img-box");t||(t=o.querySelector(".item-card-new__img-box"));modalShow(e.closest("[data-c]")?t.querySelector(`[data-c="${e.dataset.c}"]`).cloneNode(!0):t.querySelector("._active").cloneNode(!0))}else{let t=[];getJson("json/products.json").then(o=>{o.products.forEach(e=>t.push(e));const i=document.createElement("img");i.setAttribute("data-data",""),i.classList.add("_active"),t.forEach(t=>{+t.id==+s&&(t.src.length>1?t.src.forEach(t=>{t.color===e.dataset.c&&(i.setAttribute("src",""+t.img),i.setAttribute("width",""+t.size.width),i.setAttribute("height",""+t.size.height),i.setAttribute("alt",""+t.alt))}):(i.setAttribute("src",""+t.src[0].img),i.setAttribute("width",""+t.src[0].size.width),i.setAttribute("height",""+t.src[0].size.height),i.setAttribute("alt",""+t.src[0].alt)))}),modalShow(i)}).catch(()=>alert("Error!"))}modalTarget=e}var s;if(e&&e.classList.contains("new-product__view-all")&&(t.preventDefault(),(s=e).classList.contains("_hold")||(s.classList.add("_hold"),getJson("json/products.json").then(t=>{t.products.forEach(t=>{new ItemProduct(t).render(),addColorsBtn(),addFavoritColor(),addItemStatus()}),addItemHide(document.querySelector(".new-product__link._active")),s.remove()}).catch(()=>alert("Error!")).finally(()=>{stars(),s.classList.remove("_hold")}))),e&&e.classList.contains("item-card__change-color")&&(t.preventDefault(),changeItemColor(e)),(e&&e.classList.contains("actions-product__link--favorit")||e.classList.contains("actions-product-new__link--favorit"))&&(t.preventDefault(),changeItemFavorite(e)),(e&&e.classList.contains("actions-product__link--change")||e.classList.contains("actions-product-new__link--change"))&&t.preventDefault(),e&&e.classList.contains("new-product__link")&&(t.preventDefault(),document.querySelectorAll(".new-product__link").forEach(t=>t.classList.remove("_active")),e.classList.add("_active"),addItemHide(e)),e&&e.closest("[data-star]")&&changeStarReit(e),e&&e.classList.contains("cart")){let s;if(e.classList.contains("actions-product__link--cart")&&(s=e.closest(".item-card")),e.classList.contains("actions-product-new__link--cart")&&(s=e.closest(".item-card-new"),console.log(s)),e.classList.contains("modal-img__cart")){const t=modalTarget.closest("[data-pid]").dataset.pid;s=document.querySelector(`.item-card[data-pid="${t}"]`),s||(s=document.querySelector(`.item-card-new[data-pid="${t}"]`))}if(e.classList.contains("cart-promo__cart")){const t=e.closest("[data-pid]").dataset.pid;s=document.querySelector(`.item-card[data-pid="${t}"]`)}const o=s.dataset.pid,i=s.querySelector(".item-card__img-box")?s.querySelector(".item-card__img-box").querySelector("._active").dataset.c:"";addToCart(e,o,i),t.preventDefault()}if(e&&e.classList.contains("cart-header__icon")||e.closest(".cart-header__icon")?(document.querySelector(".cart-list").children.length>0&&document.querySelector(".cart-header").classList.toggle("_active"),t.preventDefault()):e.closest(".cart-header")||e.classList.contains("actions-product__link--cart")||e.classList.contains("item-card__change-color")||document.querySelector(".cart-header").classList.remove("_active"),e&&e.classList.contains("cart-list__delete")){const s=e.closest(".cart-list__item").dataset.cartPid;updateCart(e,s,"#000",!1),t.preventDefault()}}function changeItemColor(t){const e=t.closest("[data-pid]"),s=e.querySelectorAll(".item-card__change-color"),o=e.querySelectorAll("[data-c]"),i=e=>{e.forEach(e=>{e.classList.remove("_active"),e.classList.remove("_fade"),e.dataset.c&&t.dataset.color==e.dataset.c&&(e.classList.add("_active"),e.classList.add("_fade"))})};i(s),i(o),t.classList.add("_active"),t.classList.add("_fade")}function addFavoritColor(){document.querySelectorAll("[data-f]").forEach(t=>{t.style.color="#c72535",t.style.transform="scale(1.5)"})}function changeItemFavorite(t){t.hasAttribute("data-f")?(t.removeAttribute("data-f"),t.style.color="",t.style.transform=""):t.setAttribute("data-f",""),addFavoritColor(),addItemStatus()}function addItemHide(t){document.querySelectorAll(".new-product__cart-item").forEach(e=>{e.dataset.tab.includes(t.dataset.tab)?e.classList.remove("_hide"):e.classList.add("_hide")})}function addItemStatus(){document.querySelectorAll("[data-pid]").forEach((t,e)=>{userAction.items["item-"+(e+1)]={},userAction.items["item-"+(e+1)].id=t.dataset.pid,t.querySelectorAll("[data-color]").length?t.querySelectorAll("[data-color]").forEach((s,o)=>{userAction.items["item-"+(e+1)]["type-"+(o+1)]={},userAction.items["item-"+(e+1)]["type-"+(o+1)].favorit=!!t.querySelector("[data-f]"),userAction.items["item-"+(e+1)]["type-"+(o+1)].color=s.dataset.color}):(userAction.items["item-"+(e+1)]["type-1"]={},userAction.items["item-"+(e+1)]["type-1"].favorit=!!t.querySelector("[data-f]"))})}function changeStarReit(t){const e=t.closest("[data-star]"),s=e.querySelectorAll("span");let o=0;if(s.forEach((s,i)=>{s.style.color="",s==t&&(e.setAttribute("data-star",i+1),o=i)}),colorStars(e.dataset.star,s),t.closest(".item-card__body")){const e=t.closest(".item-card__body").querySelector(".item-card__stars"),s=e.querySelectorAll("span");s.forEach(t=>t.style.color=""),e.setAttribute("data-star",o+1),colorStars(e.dataset.star,s)}}function addToCart(t,e,s){if(!t.classList.contains("_hold")){t.classList.add("_hold"),t.classList.add("_fly");const o=document.querySelector(".cart-header__icon");let i;if(t.classList.contains("actions-product__link--cart")){i=document.querySelector(`.item-card[data-pid="${e}"]`).querySelector(".item-card__img-box").querySelector("._active")}if(t.classList.contains("actions-product-new__link--cart")){i=document.querySelector(`.item-card-new[data-pid="${e}"]`).querySelector(".item-card-new__img-box").querySelector("._active")}t.classList.contains("modal-img__cart")&&(i=t.closest(".modal-img__wrapper").querySelector("[data-data]")),t.classList.contains("cart-promo__cart")&&(i=t.closest(".cart-promo__box").querySelector("[data-data]"));const a=i.cloneNode(!0),r=i.offsetWidth,c=i.offsetHeight,n=i.getBoundingClientRect().top,l=i.getBoundingClientRect().left;a.setAttribute("class","_flyimg _ibg"),a.style.cssText=`\n\t\t\tleft: ${l}px;\n\t\t\ttop: ${n}px;\n\t\t\twidth : ${r}px;\n\t\t\theight : ${c}px;\n\t\t\t`,document.body.append(a);const d=o.getBoundingClientRect().top,u=o.getBoundingClientRect().left;a.style.cssText=`\n\t\t\tleft: ${u}px;\n\t\t\ttop: ${d}px;\n\t\t\twidth: 0px;\n\t\t\theight: 0px;\n\t\t\topacity: 0;\n\t\t\t`,a.addEventListener("transitionend",()=>{t.classList.contains("_fly")&&(a.remove(),updateCart(t,e,s),t.classList.remove("_fly"))})}}function updateCart(t,e,s,o=!0){const i=document.querySelector(".cart-header"),a=i.querySelector(".cart-header__icon"),r=a.querySelector("span"),c=document.querySelector(`[data-cart-pid="${e}"]`),n=document.querySelector(".cart-list");if(o){let o,i,l;r?r.innerHTML=++r.innerHTML:a.insertAdjacentHTML("beforeend","<span>1</span>");const d=(t,e)=>{document.querySelector(`.item-card[data-pid="${t}"]`)?(o=document.querySelector(`.item-card[data-pid="${t}"]`),i=o.querySelector(".item-card__name").innerHTML,l=o.querySelector(".item-card__img-box").querySelector("._active").outerHTML):document.querySelector(`.item-card-new[data-pid="${t}"]`)&&(o=document.querySelector(`.item-card-new[data-pid="${t}"]`),i=o.querySelector("[data-data]").getAttribute("alt"),l=o.querySelector(".item-card-new__img-box").querySelector("._active").outerHTML);const s=e?`<div class="cart-list__color">Color: <div class="cart-list__color-dot" data-cart-color ="${e}" style="background: ${e};"></div> </div>`:"";n.insertAdjacentHTML("beforeend",`<li data-cart-pid="${t}" class ="cart-list__item">\n\t\t\t<a href="#" class="cart-list__image _ibg">${l}</a>\n\t\t\t<div class="cart-list__body">\n\t\t\t\t<a href="#" class="cart-list__title">${i}</a>\n\t\t\t\t<div class="cart-list__quantity">Quantity: <span>1</span></div>\n\t\t\t\t${s}\n\t\t\t\t<a href="#" class="cart-list__delete">Delete</a>\n\t\t\t</div>\n\t\t</li>`)},u=t=>{const e=t.querySelector(".cart-list__quantity span");e.innerHTML=++e.innerHTML};if(c)if(s){const t=document.querySelectorAll(`[data-cart-pid="${e}"]`),o=[];t.forEach(t=>{const e=t.querySelector(".cart-list__color-dot").dataset.cartColor;e==s&&u(t),o.push(e)}),o.includes(s)||d(e,s)}else u(c);else d(e,s);t.classList.remove("_hold")}else{const t=c.querySelector(".cart-list__quantity span");t.innerHTML=--t.innerHTML,!parseInt(t.innerHTML)&&c.remove();const e=--r.innerHTML;e?r.innerHTML=e:(r.remove(),i.classList.remove("_active"))}}document.addEventListener("keydown",(function(t){"Escape"===t.code&&popup_close()})),window.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",documentActions),scrollHeader(),addColorsBtn(),addFavoritColor(),addItemStatus()});let forms=document.querySelectorAll("form");if(forms.length>0)for(let t=0;t<forms.length;t++){forms[t].addEventListener("submit",form_submit)}async function form_submit(t){let e=t.target.closest("form");if(0==form_validate(e)){let s=e.getAttribute("action")?e.getAttribute("action").trim():"#",o=e.getAttribute("method")?e.getAttribute("method").trim():"GET";const i=e.getAttribute("data-message"),a=e.getAttribute("data-ajax"),r=e.getAttribute("data-test");if(a){t.preventDefault();let a=new FormData(e);e.classList.add("_sending");let r=await fetch(s,{method:o,body:a});if(r.ok){await r.json();e.classList.remove("_sending"),i&&popup_open(i+"-message"),form_clean(e)}else alert("Ошибка"),e.classList.remove("_sending")}r&&(t.preventDefault(),popup_open(i+"-message"),form_clean(e))}else{let s=e.querySelectorAll("._error");s&&e.classList.contains("_goto-error")&&_goto(s[0],1e3,50),t.preventDefault()}}function form_validate(t){let e=0,s=t.querySelectorAll("._req");if(s.length>0)for(let t=0;t<s.length;t++){const o=s[t];_is_hidden(o)||(e+=form_validate_input(o))}return e}function form_validate_input(t){let e=0,s=t.getAttribute("data-value");if("email"==t.getAttribute("name")||t.classList.contains("_email")){if(t.value!=s){let e=t.value.replace(" ","");t.value=e}email_test(t)||t.value==s?(form_add_error(t),e++):form_remove_error(t)}else"checkbox"==t.getAttribute("type")&&0==t.checked||""==t.value||t.value==s?(form_add_error(t),e++):form_remove_error(t);return e}function form_add_error(t){t.classList.add("_error"),t.parentElement.classList.add("_error");let e=t.parentElement.querySelector(".form__error");e&&t.parentElement.removeChild(e);let s=t.getAttribute("data-error");s&&""!=s&&t.parentElement.insertAdjacentHTML("beforeend",'<div class="form__error">'+s+"</div>")}function form_remove_error(t){t.classList.remove("_error"),t.parentElement.classList.remove("_error");let e=t.parentElement.querySelector(".form__error");e&&t.parentElement.removeChild(e)}function form_clean(t){let e=t.querySelectorAll("input,textarea");for(let t=0;t<e.length;t++){const s=e[t];s.parentElement.classList.remove("_focus"),s.classList.remove("_focus"),s.value=s.getAttribute("data-value")}let s=t.querySelectorAll(".checkbox__input");if(s.length>0)for(let t=0;t<s.length;t++){s[t].checked=!1}let o=t.querySelectorAll("select");if(o.length>0)for(let t=0;t<o.length;t++){const e=o[t],s=e.getAttribute("data-default");e.value=s,select_item(e)}}let viewPass=document.querySelectorAll(".form__viewpass");for(let t=0;t<viewPass.length;t++){const e=viewPass[t];e.addEventListener("click",(function(t){e.classList.contains("_active")?e.parentElement.querySelector("input").setAttribute("type","password"):e.parentElement.querySelector("input").setAttribute("type","text"),e.classList.toggle("_active")}))}let selects=document.getElementsByTagName("select");function selects_init(){for(let t=0;t<selects.length;t++){select_init(selects[t])}document.addEventListener("click",(function(t){selects_close(t)})),document.addEventListener("keydown",(function(t){"Escape"===t.code&&selects_close(t)}))}function selects_close(t){const e=document.querySelectorAll(".select");if(!t.target.closest(".select")&&!t.target.classList.contains("_option"))for(let t=0;t<e.length;t++){const s=e[t],o=s.querySelector(".select__options");s.classList.remove("_active"),_slideUp(o,100)}}function select_init(t){const e=t.parentElement,s=t.getAttribute("class"),o=t.querySelector("option:checked");t.setAttribute("data-default",o.value),t.style.display="none",e.insertAdjacentHTML("beforeend",'<div class="select select_'+s+'"></div>'),t.parentElement.querySelector(".select").appendChild(t),select_item(t)}function select_item(t){const e=t.parentElement,s=e.querySelector(".select__item"),o=t.querySelectorAll("option"),i=t.querySelector("option:checked").text,a=t.getAttribute("data-type");s&&s.remove();let r="";r="input"==a?'<div class="select__value icon-select-arrow"><input autocomplete="off" type="text" name="form[]" value="'+i+'" data-error="Ошибка" data-value="'+i+'" class="select__input"></div>':'<div class="select__value icon-select-arrow"><span>'+i+"</span></div>",e.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+r+'</div><div class="select__options">'+select_get_options(o)+"</div></div></div>"),select_actions(t,e)}function select_actions(t,e){const s=e.querySelector(".select__item"),o=e.querySelector(".select__title"),i=e.querySelector(".select__options"),a=e.querySelectorAll(".select__option"),r=t.getAttribute("data-type"),c=e.querySelector(".select__input");function n(){let s=e.querySelectorAll(".select__option"),o=t.querySelectorAll("option"),i=[];for(let t=0;t<s.length;t++){const e=s[t];if(o[t].removeAttribute("selected"),e.classList.contains("_selected")){const s=e.innerHTML;i.push(s),o[t].setAttribute("selected","selected")}}e.querySelector(".select__value").innerHTML="<span>"+i+"</span>"}function l(t){if(!t){let t=document.querySelectorAll(".select");for(let e=0;e<t.length;e++){const o=t[e],i=o.querySelector(".select__options");o!=s.closest(".select")&&(o.classList.remove("_active"),_slideUp(i,100))}_slideToggle(i,100),e.classList.toggle("_active")}}o.addEventListener("click",(function(t){l()}));for(let s=0;s<a.length;s++){const o=a[s],i=o.getAttribute("data-value"),d=o.innerHTML;"input"==r?c.addEventListener("keyup",select_search):o.getAttribute("data-value")!=t.value||t.hasAttribute("multiple")||(o.style.display="none"),o.addEventListener("click",(function(){for(let t=0;t<a.length;t++){a[t].style.display="block"}let s;"input"==r?(c.value=d,t.value=i):t.hasAttribute("multiple")?(o.classList.toggle("_selected"),n()):(e.querySelector(".select__value").innerHTML="<span>"+d+"</span>",t.value=i,o.style.display="none"),t.hasAttribute("multiple")&&(s="multiple"),l(s)}))}}function select_get_options(t){if(t){let e="";for(let s=0;s<t.length;s++){const o=t[s],i=o.value;if(""!=i){e=e+'<div data-value="'+i+'" class="select__option">'+o.innerHTML+"</div>"}}return e}}function select_search(t){t.target.closest(".select ").querySelector(".select__options");let e=t.target.closest(".select ").querySelectorAll(".select__option"),s=t.target.value.toUpperCase();for(let t=0;t<e.length;t++){let o=e[t];(o.textContent||o.innerText).toUpperCase().indexOf(s)>-1?o.style.display="":o.style.display="none"}}function selects_update_all(){let t=document.querySelectorAll("select");if(t)for(let e=0;e<t.length;e++){select_item(t[e])}}selects.length>0&&selects_init();let inputs=document.querySelectorAll("input[data-value],textarea[data-value]");function inputs_init(t){if(t.length>0)for(let e=0;e<t.length;e++){const s=t[e],o=s.getAttribute("data-value");if(input_placeholder_add(s),""!=s.value&&s.value!=o&&input_focus_add(s),s.addEventListener("focus",(function(t){s.value==o&&(input_focus_add(s),s.value=""),"pass"!==s.getAttribute("data-type")||s.parentElement.querySelector(".form__viewpass").classList.contains("_active")||s.setAttribute("type","password"),s.classList.contains("_date"),s.classList.contains("_phone")&&(s.classList.add("_mask"),Inputmask("+375 (99) 9999999",{clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){input_clear_mask(s,o)}}).mask(s)),s.classList.contains("_digital")&&(s.classList.add("_mask"),Inputmask("9{1,}",{placeholder:"",clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){input_clear_mask(s,o)}}).mask(s)),form_remove_error(s)})),s.addEventListener("blur",(function(t){""==s.value&&(s.value=o,input_focus_remove(s),s.classList.contains("_mask")&&input_clear_mask(s,o),"pass"===s.getAttribute("data-type")&&s.setAttribute("type","text"))})),s.classList.contains("_date")){const t=datepicker(s,{customDays:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],customMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],overlayButton:"Применить",overlayPlaceholder:"Год (4 цифры)",startDay:1,formatter:(t,e,s)=>{const o=e.toLocaleDateString();t.value=o},onSelect:function(t,e,s){input_focus_add(t.el)}}),e=s.getAttribute("data-from"),o=s.getAttribute("data-to");e&&t.setMin(new Date(e)),o&&t.setMax(new Date(o))}}}function input_placeholder_add(t){const e=t.getAttribute("data-value");""==t.value&&""!=e&&(t.value=e)}function input_focus_add(t){t.classList.add("_focus"),t.parentElement.classList.add("_focus")}function input_focus_remove(t){t.classList.remove("_focus"),t.parentElement.classList.remove("_focus")}function input_clear_mask(t,e){t.inputmask.remove(),t.value=e,input_focus_remove(t)}inputs_init(inputs);let quantityButtons=document.querySelectorAll(".quantity__button");if(quantityButtons.length>0)for(let t=0;t<quantityButtons.length;t++){const e=quantityButtons[t];e.addEventListener("click",(function(t){let s=parseInt(e.closest(".quantity").querySelector("input").value);e.classList.contains("quantity__button_plus")?s++:(s-=1,s<1&&(s=1)),e.closest(".quantity").querySelector("input").value=s}))}const priceSlider=document.querySelector(".price-filter__slider");if(priceSlider){let t=priceSlider.getAttribute("data-from"),e=priceSlider.getAttribute("data-to");function setPriceValues(){let t,e;""!=priceStart.value&&(t=priceStart.value),""!=priceEnd.value&&(e=priceEnd.value),priceSlider.noUiSlider.set([t,e])}noUiSlider.create(priceSlider,{start:[0,2e5],connect:!0,tooltips:[wNumb({decimals:0,prefix:t+" "}),wNumb({decimals:0,prefix:e+" "})],range:{min:[0],max:[2e5]}})}